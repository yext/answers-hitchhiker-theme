<link rel="stylesheet" type="text/css" href="https://assets.sitescdn.net/answers/v1.0/answers.css">
<script src="https://assets.sitescdn.net/answers/v1.0/answerstemplates.compiled.min.js"></script>
<script>
  function initAnswers() {
    const JAMBO_INJECTED_DATA = {{{json env.JAMBO_INJECTED_DATA}}} || {};
    const pages = JAMBO_INJECTED_DATA.pages || {};
    const IS_STAGING = HitchhikerJS.isStaging(pages.stagingDomains || []);
    ANSWERS.init(Object.assign(
      {"templateBundle": TemplateBundle.default},
      {{#with env.JAMBO_INJECTED_DATA}}
        {
          experienceKey: "{{../global_config.experienceKey}}",
          experienceVersion: IS_STAGING ? 'STAGING' : 'PRODUCTION',
          {{#if businessId}}businessId: "{{businessId}}",{{/if}}
          {{#with (lookup (lookup (lookup this 'answers') 'experiences') ../global_config.experienceKey)}}
            {{#if apiKey}}apiKey: "{{apiKey}}"{{/if}}
          {{/with}}
        },
      {{/with}}
      {{{ json global_config }}},
      {
        onReady: () => {
          {{> @partial-block }}

          ANSWERS.registerHelper('all', function (...args) {
            return args.filter(item => item).length === args.length;
          });

          ANSWERS.registerHelper('any', function (...args) {
            return args.filter(item => item).length > 1;
          });
        }
      }
    ));
  };
</script>
<script src="https://assets.sitescdn.net/answers/v1.0/answers.min.js" onload="initAnswers()" async></script>

