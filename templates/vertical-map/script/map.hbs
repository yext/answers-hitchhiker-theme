ANSWERS.addComponent('Map', Object.assign({},
{
  container: '#js-answersMap',
  apiKey: HitchhikerJS.getDefaultMapApiKey(
    {{#if componentSettings.Map.mapProvider}}
      '{{componentSettings.Map.mapProvider}}'
    {{else}}
      {{#with (lookup verticalsToConfig verticalKey)}}
        {{#if mapConfig}}
          '{{mapConfig.mapProvider}}'
        {{/if}}
      {{/with}}
    {{/if}}
  ),
},
{{#with (lookup verticalsToConfig verticalKey)}}
  {{#if mapConfig}}
    {{{json mapConfig}}},
  {{/if}}
{{/with}}
{{{ json componentSettings.Map }}},
{
  {{!-- Add theme default map pin, add first with defaults.
  The componentSettings overrides verticalsToConfig; if
  both are absent, use defaults. --}}
  pin: {{> templates/vertical-map/script/mappin }},
  {{#with (lookup verticalsToConfig verticalKey)}}
    {{#with mapConfig.pin}}
      pin: {{> templates/vertical-map/script/mappin }},
    {{/with}}
  {{/with}}
  {{#with componentSettings.mapConfig.pin}}
    pin: {{> templates/vertical-map/script/mappin }},
  {{/with}}
}));